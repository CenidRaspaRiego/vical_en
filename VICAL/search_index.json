[["index.html", "GUIA DE VICAL: Calculadora de indices de vegetación Bienvenidos", " GUIA DE VICAL: Calculadora de indices de vegetación INIFAP: Sergio Jiménez-Jiménez; Mariana Marcial-Pablo; Waldo Ojeda-Bustamante; Ernesto Sifuentes-Ibarra; Marco Inzunza-Ibarra, Ignacio Sánchez-Cohen 2022-06-07 Bienvenidos Este sitio es una guía para usar la herramienta VICAL desarrollada dentro de Google Earth Engine (GEE). VICAL es util para calcular de manera online 23 índices de vegetación (empleados comúnmente en aplicaciones agrícolas) de cualquier poligono(s) del mundo (digitalizado por el usuario o archivo vector) usando imágenes LandSat y Sentinel-2. Esto se logra sin que el usuario descargue/cargue imágenes satelitales o escriba una solo línea de código, solo necesita tener una conexión a internet. Puede accesar a VICAL desde la dirección https://inifapcenidraspa.users.earthengine.app/view/vical Figura 0.1: Vista principal de VICAL Este trabajo fue desarrollado por investigadores del INIFAP CENID-RASPA y CEVAF. Dentro de las mejoras que se planean en VICAL, es que mediante experimentación se logre la calibración de variables biofísicas de interés para diversos cultivos usando indices de vegetacion (IV); y estos resultados estén disponibles en VICAL para que sea útil a otras personas y asi puedan monitorear facilmente variables relacionadas con ingenieria de riego. Vuelva a consultar de vez en cuando para conocer las nuevas aplicaciones de GEE, los scripts de ejemplo y las actualizaciones de VICAL. Puede intentar hacer una actualización completa en el sitio para asegurarse de ver los cambios recientes (lo que está viendo podría ser una versión del sitio previamente almacenada en caché) Sí tiene alguna duda o sugerencia o quiere participar en el proyecto puede escribir al correo jimenez.sergio@inifap.gob.mx "],["intro.html", "Capitulo 1 Introducción 1.1 Alcances", " Capitulo 1 Introducción El objetivo de esta sección es presentar los alcances de VICAL y como utilizarlo, ademas de, como implementar las librerías en cualquier Script de GEE. Se describen los índices de vegetación considerados en el programa y las colecciones de imagenes que se usan para calcularlo, cuáles son los resultados y cómo están formateados. VICAL fue desarrollado dentro de GEE https://earthengine.google.com/ y fue codificado en JavaScript desde Earth Engine Code Editor https://code.earthengine.google.com/. 1.1 Alcances Los principios de diseño para VICAL fueron que deberia proporcionar para cualquier área (definida por el usuario) donde exista una imagen Landsat o Sentinel-2 la estimación de diferentes IVs aplicados en agricultura, además, de graficar la serie de tiempo de dicho índice para esa zona en el rango de fecha establecido por el usuario. Todo sin que el usuario escriba una sola linea de codigo dentro de GEE o que lleve a cabo el pre-procesamiento de las imágenes. VICAL tiene tres principales funciones: 1.- Mapas de índices de vegetación usando imágenes (libres de nubes) LandSat (4, 5, 7,8 y 9) y Sentinel-2 de cualquier poligono digitalizado por el usuario o archivo vector. 2.- El despliegue de series de tiempo de Indices de vegetación (media y desviación estándar) para polígonos (dibujados por el usuario o archivo vector) en un tiempo fijo con imagenes Landsat, sentinel o ambos. 3.- Mapa de regresiones usando los IVs o productividad relativa. En esta herramientas, se puede configurar algunos coeficientes de IV como en EVI, SAVI, entre otros. Creemos que la herramienta VICAL ahorra tiempo y evita el procedimiento trivial repetitivo asociado a los cálculos de IVs “manuales” (descarga de imágenes, procesamiento, etc.), que demanda diferentes tipos de software, que pueden conducir a errores humanos. VICAL puede ser empleado para extraer rápidamente valores de índices de vegetación para su calibración en variables biofísicas agrícolas. "],["Sat.html", "Capitulo 2 Satélites- Colección de imagenes", " Capitulo 2 Satélites- Colección de imagenes VICAL utiliza las colecciones de imágenes de reflectancia de la superficie terrestre corregidas atmosféricamente de LandSat (misiones 4, 5, 7, 8 y 9, con imágenes desde 1982 hasta el presente) y Sentinel-2. En la Tabla 2.1 se muestra las características generales de estas colecciones de imágenes y el código de la colección de imágenes en GEE Tabla 2.1: Colección de imagenes Landsat y Sentinel de GEE considerados en VICAL Sensor Dataset.availability Collection.ID Landsat-4 TM 22/08/1982 - 24/06/1993 LANDSAT/LT04/C02/T1_L2 Landsat-5 TM 16/03/1993 – 05/05/2012 LANDSAT/LT05/C02/T1_L2 Landsat-7 ETM+ 01/01/1999-present LANDSAT/ LC08 /C01/T1_L2 Landsat-8 OLI 11/04/2013- present LANDSAT/LE07/C01/T1_L2 Landsat-9 OLI-2 31/10/2021- present LANDSAT/LC09/C02/T1_L2 Sentinel-2 (MSI) 28/03/2017-present COPERNICUS/S2_SR_HARMONIZED La ubicación de las diferentes bandas espectrales de estos sensores se muestra en la Figura 2.1. Figura 2.1: Comparación de Lansat y Sentinel-2 y ubicacion de las bandas espectrales. Los números indican el número de bandas espectrales consideradas en cada sensor. "],["Iveg.html", "Capitulo 3 Indices de Vegetación", " Capitulo 3 Indices de Vegetación Los IVs permiten la relación cuantitativa y funcional con diferentes parámetros o variables de la vegetación. Son 23 IV considerados en VICAL y son los que comunmente se utilizan en aplicaciones agricolas (Bannari 2009),(Xue 2017). Los nombres de estos indices asi como su abreviatura se muestran en la siguiente lista: 1: ARVI: Atmospherically resistant vegetation index* \\[ ARVI = \\frac{p(NIR-rb)}{NIR+rb}; \\] \\[ rb = {R-γ(B-R)}; \\thinspace \\thinspace Valor \\thinspace por \\thinspace defecto: \\thinspace γ=1.0 \\] 2: ATSAVI: Adjusted transformed soil-adjusted vegetation index \\[ ATSAVI = \\frac{a(NIR-aR-b)}{(R+aNIR-ab+X(1+a^2))}; \\] \\[ \\thinspace \\thinspace Valor \\thinspace por \\thinspace defecto: \\thinspace a= 1 ;\\thinspace b=0; \\thinspace X= 0.08 \\] 3: DVI: Difference vegetation index \\[ DVI = {(NIR-R)} ; \\] 4: EVI: Enhanced vegetation index \\[ EVI = \\frac{2.5*(NIR-R)}{NIR+C_1 R-C_2 B+L}; \\] \\[ \\thinspace \\thinspace Valor \\thinspace por \\thinspace defecto: \\thinspace C_1= 6.0 ;\\thinspace C_2=7.5; \\thinspace L= 1.0 \\] 5: EVI2*: Enhanced vegetation index \\[ EVI2 = \\frac{2.5*(NIR-R)}{NIR+C_1 R+1}; \\thinspace \\thinspace Valor \\thinspace por \\thinspace defecto: \\thinspace C_1= 2.4 \\] 6: GNDVI: Green normalized difference vegetation index \\[ GNDVI = \\frac{NIR-G}{NIR+G}; \\] 7: MSAVI2: Modified soil adjusted vegetation index \\[ MSAVI2 = \\frac{(2NIR+1)-\\sqrt((2NIR+1)^2-8(NIR-R))}{2}; \\] 8: MSI: Moisture stress index \\[ MSI = \\frac{SWIR_1}{NIR}; \\] 9: MTVI: Modiﬁed triangular vegetation index \\[ MTVI ={1.2[1.2*(NIR-G)-2.5*(R-G)]}; \\] 10: MTVI2: Modiﬁed triangular vegetation index-2 \\[ MTVI2 = \\frac{1.2[1.2*(NIR-G)-2.5*(R-G)]}{\\sqrt((2NIR+1)^2-(6NIR-5\\sqrt(R))-0.5)}; \\] 11: NDTI: Normalized difference tillage index (NDTI) \\[ NDTI = \\frac{SWIR_1-SWIR_2}{SWIR_1+SWIR_2}; \\] 12: NDVI: Normalized difference vegetation index \\[ NDVI = \\frac{NIR-R}{NIR+R}; \\] 13: NDWI: Normalized difference water index \\[ NDWI = \\frac{NIR-SWIR_1}{NIR+SWIR_1}; \\] 14: OSAVI: Optimized soil adjusted vegetation index \\[ OSAVI = \\frac{1.16*(NIR-R)}{NIR+R+X}; \\thinspace \\thinspace Valor \\thinspace por \\thinspace defecto: \\thinspace X= 0.16 \\] 15: RDVI: Renormalized difference vegetation index \\[ RDVI = \\frac{NIR-R}{\\sqrt(NIR+R)}; \\] 16: RI: Redness index \\[ RI = \\frac{p(NIR-G)}{NIR+G}; \\] 17: RVI: Ratio vegetation index \\[ RVI = \\frac{R}{NIR}; \\] 18: SAVI: Soil adjusted vegetation index \\[ SAVI = \\frac{(NIR-R)}{NIR+R+L} (1+ L); \\thinspace \\thinspace Valor \\thinspace por \\thinspace defecto: \\thinspace L= 0.5 \\] 19: TVI: Triangular vegetation index \\[ TVI = 0.5*{[120(NIR-G)-200(R-G)]}; \\] 20: TSAVI: Transformed soil adjusted vegetation index \\[ TSAVI = \\frac{a(NIR-aR-b)}{R+aNIR-ab}; \\thinspace \\thinspace Valor \\thinspace por \\thinspace defecto: \\thinspace a= 1, \\thinspace b=0. \\] 21: VARI: Visible atmospherically resistant index \\[ VARI = \\frac{G-R}{G+R-B}; \\] 22: VIN: Vegetation index number or simple ratio \\[ VIN = \\frac{NIR}{R}; \\] 23: WDRVI: Wide dynamic range vegetation index \\[ WDRVI = \\frac{∝NIR-R}{∝NIR+R)}; \\thinspace \\thinspace Valor \\thinspace por \\thinspace defecto: \\thinspace ∝= 0.2 \\] VICAL permite al usuario configurar algunos parámetros de VIs (como ARVI, ATSAVI, EVI, EVI2, OSAVI, SAVI, ATSAVI y WDRVI), es decir, todos aquellos IVs que necesitan, además de las bandas de espectro, alguna variable de ajuste El nombre de las bandas con las abreviaturas que se emplearon en las ecuaciones de los IVs se muestra en la Tabla 3.1. Tabla 3.1: Abreviatura de las bandas espectrales empleadas en las ecuaciones de los IV Abreviatura Nombre B Azul/Blue G Verde/Green R Rojo/Red RE Borde Rojo/Red edge NIR Infrarrojo Cercano /Near infrared SWIR1 Infrarrojo de onda corta 1/Shortwave infrared 1 SWIR2 Infrarrojo de onda corta 2/Shortwave infrared 2 Si deseas agregar algun indice de vegetación puedes escribirnos al correo jimenez.sergio@inifap.gob.mx Referencias "],["configuración.html", "Capitulo 4 Configuración 4.1 Configuración General 4.2 Usando poligonos digitalizados 4.3 Usando archivo vector", " Capitulo 4 Configuración Antes de calcular los IVs en VICAL se deben seleccionar una serie de parámetros que corresponden a la configuración. 4.1 Configuración General En principio, para estimar el IV de cualquier superficie el usuario tiene dos opciones: i) digitalizar polígonos o ii) Usar un archivo vector de GEE. Además, es necesario configurar una serie de opciones, estos son: 1). Rango de fechas: Se debe ingresar una fecha inicial y final en que desea estimar estos índices de vegetación (Figura 4.1). La fecha deben tener el siguiente formado: Cuatro dígitos para el año, dos para el mes y dos para el día (AAAA-MM-DD). Figura 4.1: TexBox de Rango de fechas VICAL utiliza este intervalo de fechas para buscar imágenes disponibles y con estas estimar valores del índice de vegetación. VICAL por defecto establece la fecha final como la fecha actual y la fecha inicial un año atrás a la fecha actual. 2) porcentaje de nubes: Se debe ingresar un umbral máximo de nubes en las imágenes, por defecto es establecido en 30% (Figura 4.2). Figura 4.2: TexBox de umbral de porcentaje de nubes 3). Satélite: de los satélites LandSat y Sentinel-2 (descritos en la sección 2 Satélite), se derivan cuatro opciones disponibles (Figura 4.3): Figura 4.3: Satelites y sensores disponibles en VICAL  i) Landsat (7, 8 y 9): proporciona imágenes LandSat de los sensores 7, 8 y 9 que se encuentren dentro del intervalo definido y con un umbral máximo de nubes. Los datos de Landsat 7 ETM+ se ajustaron espectralmente a las bandas espectrales de Landsat 8 y 9 (OLI y OLI-2) usando el procedimiento recomendado por (Roy 2016), para generar un solo conjunto de datos armonizados.  ii) Sentinel-2: solo proporciona imágenes Sentinel-2 que se encuentren dentro del intervalo definido y con el umbral máximo de nubes.  iii) Landsat (7, 8 y 9) y Sentinel-2: Proporciona tanto imágenes Landsat (7, 8 y 9) como Sentinel-2. Los datos MSI (Sentinel-2) se ajustan espectralmente a las bandas espectrales Landsat 8 y 9 (OLI y OLI-2) usando el procedimiento recomendado por (Claverie 2018). Los datos de Landsat 7 ETM+ se ajustaron espectralmente a las bandas espectrales de Landsat 8 y 9 (OLI y OLI-2) usando el procedimiento recomendado por (Roy 2016). De tal manera que se genera un solo conjunto de datos armonizados.  iv) Landsat (4 y 5): Proporciona imágenes LandSat de los sensores 4 y 5 que se encuentren dentro del intervalo definido y con un umbral máximo de nubes. 4). Índice de vegetación: El usuario puede seleccionar entre 23 IVs comúnmente empleadas en aplicaciones agrícolas (Figura 4.4), para revisar las fórmulas de cada índice de vegetación ver sección 3 Índices de vegetación.. Figura 4.4: Selector de Indices de vegetción Figura 4.5: Coeficientes de IV 5) otras funciones adicionales: VICAL permite seleccionar opciones adicionales (Figura 4.6), por ejemplo: Figura 4.6: Opciones en VICAL i) Usar un archivo vector de GEE: Como se mencionó en la parte inicial de esta sección, el usuario puede usar un archivo vector de GEE (tipo polígono). Cuando se selecciona esta opción se debe ingresar una dirección URL del archivo vector que ha sido cargado a GEE (Figura 4.7), de esta manera, aunque existan polígonos digitalizados VICAL reconoce que se deben calcular los índices de vegetación sobre los polígonos del archivo vector. Figura 4.7: URL archivo vector de GEE ii) Mapa de regresión: El usuario puede obtener como resultado un mapa de regresión tomando como base los valores de los IVs calculados, para ello puede seleccionar entre cuatro tipos de regresión (Figura 4.8): Lineal, cuadrático, potencial y exponencial y después ingresar los coeficientes de regresión. Figura 4.8: Funciones consideradas iii) Filtrar imágenes que cubran todo el polígono: cuando se active esta opción se filtrar imágenes que cubran completamente el polígono(s) de la zona, de otra manera, se muestra imágenes aunque cubran un cierto porcentaje de la zona. Esta opción es útil para polígonos que abarcan superficies grandes (cientos de has). iv) Calcular factor de ponderación: Es la relación entre el valor del índice en un píxel y el promedio del índice en el polígono (parcela). Se calcula por cada polígono digitalizado. Este factor en una parcela agrícola es un indicador normalizado del potencial productivo de cada píxel de una imagen. 5) Calcular: : Cuando se tenga configurado las opciones se debe dar clic en calculate y se mostraran mínimo tres capas en el mapa: i) imagen RGB de la primera imagen encontrada en el intervalo establecido, ii) índices de vegetación. 4.2 Usando poligonos digitalizados EL usuario puede digitalizar cualquier parcela (polígonos) usando las herramientas de dibujo que se encuentran en la esquina superior izquierda del mapa (Figura 4.9). El programa reconoce que se deben calcular los índices de vegetación sobre estos polígonos. Figura 4.9: Herramientas de dibujo Esta opción es útil cuando son pocas parcelas donde se desea estimar IVs (Figura 4.10). O bien, también es útil cuando se desea descargar índices de vegetación de una zona en particular sin importar los limites parcelarios (Figura 4.11). Para editar el polígono o crear un nuevo polígono se debe dar clic en los botones “Edit y New Polygon” respectivamente. Estas opciones están disponibles después de que se ha realizado un calculo. Figura 4.10: Parcelas digitalizadas Figura 4.11: poligono digitalizados 4.3 Usando archivo vector Para esta opción, el usuario debe ingresar el URL del archivo vector con el que desea realizar los cálculos; esto indica que debe tener una cuenta en GEE e importar un archivo vector tipo polígono en su cuenta. La URL se puede obtener dando clic izquierdo sobre el archivo que se encuentra en la pestalla Assets de su cuenta de GEE (Figura 4.12). Figura 4.12: detalles en GEE del archivo vector Una cuestión importante, para que el archivo vector se puede emplear en VICAL debe tener tener activado la casilla “Anyone can read” (Figura 4.13). Figura 4.13: poligono digitalizadas Referencias "],["implementación.html", "Capitulo 5 Implementación 5.1 Primeras visualizaciones 5.2 Navegar entre imagenes 5.3 Visualización del mapa de IV 5.4 Series de tiempo 5.5 Descargar información", " Capitulo 5 Implementación En esta sección se presenta un ejemplo de como navegar en dicha aplicación y como muestra los resultados VICAL. 5.1 Primeras visualizaciones Cuando los índices de vegetación (IV) se calculan usando VICAL, se muestran mínimo tres capas obligatorias y otras opcionales: (i) combinación RGB (Figura 5.1), (ii) el IV seleccionado (Figura 5.2), (iii) factor de ponderación (opcional) calculado por cada polígono (Figura 5.3), (iv) el mapa de regresión (Figura 5.4) y (v) polígonos dibujados por el usuario. Estos mapas, en principio, son obtenidos a partir de la primera imagen encontrada de la coleccion de imagenes. En las siguientes imágenes se muestran algunas visualizaciones obtenidas a partir de la URL que viene por defecto en VICAL y se activó la casilla “Use vector file from GEE” y activando la opción de regresión lineal con coeficientes de a=1.15 y b=0.17. Figura 5.1: Combinacion RGB Figura 5.2: mapa de NDVI Figura 5.3: Factor de ponderación (opcional) Figura 5.4: Mapa de Regresión (opcional) 5.2 Navegar entre imagenes El programa crea una colección de imágenes definida por la configuración del usuario; el usuario puede navegar entre las imágenes encontradas, para ello, del lado superior derecho aparece una barra en donde al dar clic despliega unas filas donde cada una representa una imagen. La nomenclatura corta que se empleó para nombrar las imágenes son (Figura 5.5): Número de imagen encontrada + punto + Fecha de la imagen (comenzando por año, mes y día) + / + Sensor + / + Porcentaje de nubes en la imagen. Figura 5.5: Lista de imagenes encontradas Se debe dar clic en cualquier imagen que se desea visualizar y apareceran las capas descritas en la sección 5.1 para la imagen seleccionada (Figura 5.6). Figura 5.6: Mapas para fecha seleccionada 5.3 Visualización del mapa de IV El usuario puede cambiar los valores de visualización del mapa de IV cambiando el rango en que varia el valor máximo y mínimo, para ello debe ingresar los valores en la opción “VI map display” (Figura 5.7) y presionar la tecla Enter con el teclado. Figura 5.7: Ajuste de visualiacion del mapa de IV El programa reconoce cuando se cambia el valor y automáticamente crea la capa con la nueva visualización (Figura 5.8). Es posible cambiar estos valores de visualización después de que el usuario haya navegado entre imágenes. Figura 5.8: NDVI con valores en el rango [0,1] Figura 5.9: NDVI con valores en el rango [0.3,1] 5.4 Series de tiempo La serie de tiempo del IV se obtiene al dar clic sobre cualquier polígono, por tanto, los valores son únicamente del polígono seleccionado. La serie de tiempo se muestra en una gráfica donde se calcula el promedio y desviación estándar de los valores del IV, cada punto representa una imagen encontrada según la configuración del usuario (Figura 5.10 y (Figura 5.11)). Figura 5.10: Serie de tiempo del IV para la parcela indicada Figura 5.11: Serie de tiempo del IV para la parcela indicada 5.5 Descargar información Se pueden descargar tres capas de las cinco que se muestran en el mapa. Estas opciones (botones) se muestran en la parte inferior de la sección de configuración (Figura 5.12). Las capas que se permiten descargar son: Figura 5.12: opciones de descarga i) Mapa de vegetación: Se descarga la imagen Raster con valores del índice de vegetación calculada y recortada para la zona de interés, la descarga se realiza en formato TIF que puede ser visualizado por ejemplo en QGIS (Figura 5.13). ii) Archivo vector: Se descarga el polígono digitalizado o bien el archivo vector en formato kml, que puede ser visualizado por ejemplo en Google Earth. iii) Mapa de regresión: Esta opción está disponible si se activa la casilla de “regression map”, se descarga la imagen raster con valores del mapa de regresión y recortada para la zona de interés, la descarga se realiza en formato TIF que puede ser visualizado por ejemplo en QGIS. Figura 5.13: Imagen de NDVI visualizado en QGIS "],["vical-en-gee.html", "Capitulo 6 VICAL en GEE 6.1 Coleccion de imagenes 6.2 Indices de vegetación", " Capitulo 6 VICAL en GEE En esta sección se muestra cómo usar los archivos de VICAL para implementarlos en un script propio de GEE. VICAL cuenta con tres archivos que puede importar a su Script, estos son: // archivo para las colecciones de imagenes); var imp = require(&#39;users/InifapCenidRaspa/VICAL:Exportaciones&#39;); // archivo para los indices de vegetacion var imp2= require(&#39;users/InifapCenidRaspa/VICAL:VegetationIndex&#39;); // archivo para las visualizaciones var St= require(&#39;users/InifapCenidRaspa/VICAL:Style&#39;); 6.1 Coleccion de imagenes Antes de importar el conjunto de colecciones de imágenes se deben definir ciertas variables que van a ser útiles para filtrar la colección, estos son: i) un punto o polígono; ii) intervalo de fechas y iii) valor umbral de nubes en las imágenes; esto se muestra a continuación: var fecha = [&#39;2021-01-01&#39;, &#39;2022-03-18&#39;]; //Fecha inicial y final //poligono o punto var table = ee.FeatureCollection(&quot;projects/calcium-verbena-328905/assets/Bate&quot;); var p_nubes= 30;//Porcentaje de nubes 6.1.1 Landsat Si se desea usar imágenes LandSat (4, 5, 7, 8 y 9) corregidas atmosféricamente libre de nubes se puede usar el código siguiente, donde se crea una función para unir las colecciones de imágenes. Para ello se usa el archivo imp. function ColeccionImagenSR(fecha, recorte, umbral) { // se importan las colecciones de imagenes usando el archivo &quot;imp&quot; var L9sr = imp.ColeccionLandsatSR(fecha, &#39;LC09&#39;, recorte, umbral); var L8sr = imp.ColeccionLandsatSR(fecha, &#39;LC08&#39;, recorte, umbral); var L7sr = imp.ColeccionLandsatSR(fecha, &#39;LE07&#39;, recorte, umbral); var L5sr = imp.ColeccionLandsatSR(fecha, &#39;LT05&#39;, recorte, umbral); var L4sr = imp.ColeccionLandsatSR(fecha, &#39;LT04&#39;, recorte, umbral); //Los datos de ETM y ETM+ se ajustan espectrales a OLI y OLI-2 var L7a = L7sr.map(imp.TMaOLI); var L5a = L5sr.map(imp.TMaOLI); var L4a = L4sr.map(imp.TMaOLI); // Une las tres series de imágenes var serieT =L9sr.merge(L8sr).merge(L7a).merge(L5a).merge(L4a).sort(&#39;system:time_start&#39;); return serieT; } //SE importa la coleccion usando la funccion anterior var l8Sergio=ColeccionImagenSR(fecha, table, p_nubes); //podemos imprimir las imagenes usando la funcion print() para ver //si se llevo a cabo el filtrado de la coleccion de imagenes (Figura 6.1) print (l8Sergio); Con estas colecciones de imágenes se pueden calcular series de tiempo de diferentes índices de vegetación. Figura 6.1: Impresion de coleccion de imagenes Landsat 6.1.2 Sentinel-2 Si se desea usar imágenes Sentinel-2 corregidas atmosféricamente libre de nubes se puede usar el siguiente código. //SE importa la coleccion usando el siguiente codigo var S2sr = imp.ColeccionImagenSentinelSR(fecha, table, p_nubes); //podemos imprimir las imagenes usando la funcion print() para ver //si se llevo a cabo el filtrado de la coleccion de imagenes (Figura 6.2) print (S2sr); Figura 6.2: Impresion de coleccion de imagenes Sentinel-2 6.1.3 Landsat y Sentinel-2 Si se desea usar imágenes LandSat y Sentinel-2 corregidas atmosféricamente libre de nubes se puede usar el siguiente código, los datos se ajustaron espectralmente a las bandas espectrales de Landsat 8. Se emplean las funciones descritas en la Sección 6.1: function ColeccionImagenAMBOS(fecha, recorte, umbral) { //Se lee la function para imagenes Landsat con ajuste espectral var L8Conjunto=ColeccionImagenSR(fecha, recorte, umbral) //coleccion sentinel var S2sr = imp.ColeccionImagenSentinelSR(fecha, recorte, umbral); var S2a = S2sr.map(imp.MSIaOLI); //Se hace el ajuste espectral de sentinel-2 a Landsat var serieT = S2a.merge(L8Conjunto).sort(&#39;system:time_start&#39;); return serieT; } //SE importa la coleccion usando el siguiente codigo var S2B = ColeccionImagenAMBOS(fecha, table, p_nubes); //podemos imprimir las imagenes usando la funcion print() para ver //si se llevo a cabo el filtrado de la coleccion de imagenes (Figura 6.3) print (S2sr); Figura 6.3: Impresion de coleccion de imagenes Landsat y Sentinel-2 Para revisar un Script de ejemplo clic aquí 6.2 Indices de vegetación Para usar el código de índices de vegetación de VICAL se tienen que usar el archivo imp2; y se mandan a llamar estos IV usando los nombres de la columna ExpresionGEE que se muestran en la Tabla 6.1. Por ejemplo, para calcular el NDVI con la colección de imágenes LandSat y Sentinel-2 de la sección 6.1.3 se usaría el siguiente código: //Normalized Difference Vegetation Index- NDVI var ivs = ee.ImageCollection(S2B.map(imp2.NDVI)); //para imprimir y ver la banda de NDVI print (ivs); En la Figura 6.4 se muestra que en la colección de imágenes del conjunto armonizado aparece una sola banda que se llama NDVI. Figura 6.4: Impresion de coleccion de imagenes con banda NDVI Ahora, para visualizar en el mapa el NDVI de la primera imagen de la colección y recortado para la zona quedaría como se muestra en el código siguiente; donde para ver la paleta de colores se utilizaría el archivo st de ¨VICAL. //Se obtiene el NDVI de la primera imagen en la coleccion var iv = ivs.first(); //Paleta de colores donde se usa el archivo st var ivVis = {min :0, max : 1, palette : St.paletaIV}; Map.addLayer(iv.clip(table), ivVis,&#39;NDVI&#39;); //Indice //se centra el mapa a la zona Map.centerObject(table, 13); En la Figura 6.5. se muestra el mapa de NDVI para la zona de interés. Figura 6.5: mapa de NDVI para el area de interes Para revisar el codigo del ejemplo clic aquí Si se desea visualizar el NDVI de una imagen en particular se debe convertir a lista de después mandar a llamarlo. Tabla 6.1: Codigo de indices de vegetación considerados en VICAL Numero Indice Abreviatura ExpresionGEE Coeficientes 1 Atmospherically resistant vegetation index ARVI* ARVI γ=1.0 2 Adjusted transformed soil-adjusted vegetation index ATSAVI* ATSAVI 3 Difference vegetation index DVI DVI 4 Enhanced vegetation index EVI EVI C1=6.0, C2= 7.5; L=1.0 5 Enhanced vegetation index EVI2* EVI2 C1=2.4 6 Green normalized difference vegetation index GNDVI GNDVI 7 Modified soil adjusted vegetation index MSAVI2 MSAVI2 8 Moisture stress index MSI MSI 9 Modiﬁed triangular vegetation index MTVI MTVI 10 Modiﬁed triangular vegetation index-2 MTVI2 MTVI2 11 Normalized difference tillage index (NDTI) NDTI NDTI 12 Normalized difference vegetation index NDVI NDVI 13 Normalized difference water index NDWI NDWI 14 Optimized soil adjusted vegetation index OSAVI* OSAVI X=0.16 15 Renormalized difference vegetation index RDVI RDVI 16 Redness index RI RI 17 Ratio vegetation index RVI RVI 18 Soil adjusted vegetation index SAVI* SAVI L=0.5 19 Triangular vegetation index TVI TVI 20 Transformed soil adjusted vegetation index TSAVI* TSAVI a= 1 ; b=0; 21 Visible atmospherically resistant index VARI VARI 22 Vegetation index number or simple ratio VIN VIN 23 Wide dynamic range vegetation index WDRVI* WDRVI α=0.2 "],["citar.html", "Capitulo 7 Citar", " Capitulo 7 Citar "],["actualizaciones.html", "Capitulo 8 Actualizaciones 8.1 02 de Mayo del 2022", " Capitulo 8 Actualizaciones Si tiene preguntas o encuentra que las actualizaciones introducen errores, envíe un correo electrónico a Justin a: jimenez.sergio@inifap.gob.mx 8.1 02 de Mayo del 2022 -El usuario puede ingresar la URL de un archivo vector cargado desde GEE. -Se puede exportar el polígono digitalizado en formato .kml. "],["referencias.html", "Referencias", " Referencias "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
